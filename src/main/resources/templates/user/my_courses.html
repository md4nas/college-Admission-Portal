<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{base::Layout(~{::section})}">
<head>
    <meta charset="UTF-8">
    <title>My Courses</title>
</head>
<body>

<section>
    <div class="container-fluid">
        <!-- Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card bg-success text-white">
                    <div class="card-body text-center py-4">
                        <i class='bx bx-book-open' style="font-size: 3rem;"></i>
                        <h2 class="mt-3 mb-2">My Courses</h2>
                        <p class="mb-0">View your enrolled courses and academic progress</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Course Information Based on Application Status -->
        <div th:if="${application != null and (application.status == 'ACCEPTED' or application.status == 'ALLOCATED')}">
            <!-- Enrolled Course -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h5><i class='bx bx-graduation me-2'></i>Enrolled Course</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center p-3 bg-light rounded mb-3">
                                        <i class='bx bx-book text-primary me-3' style="font-size: 2rem;"></i>
                                        <div>
                                            <small class="text-muted">Course</small>
                                            <h6 class="mb-0" th:text="${application.course}"></h6>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center p-3 bg-light rounded mb-3">
                                        <i class='bx bx-target-lock text-success me-3' style="font-size: 2rem;"></i>
                                        <div>
                                            <small class="text-muted">Branch</small>
                                            <h6 class="mb-0" th:text="${application.allocatedBranch ?: application.branch1}"></h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="alert alert-success" th:if="${application.status == 'ACCEPTED'}">
                                <h6 class="alert-heading"><i class='bx bx-check-circle me-2'></i>Enrollment Confirmed</h6>
                                <p class="mb-0">Congratulations! You are successfully enrolled in the course. Classes will begin soon.</p>
                            </div>
                            
                            <div class="alert alert-warning" th:if="${application.status == 'ALLOCATED'}">
                                <h6 class="alert-heading"><i class='bx bx-time me-2'></i>Pending Confirmation</h6>
                                <p class="mb-0">Please accept your allocated seat to confirm enrollment and access course materials.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Course Curriculum -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-info text-white">
                            <h5><i class='bx bx-list-ul me-2'></i>Course Curriculum</h5>
                        </div>
                        <div class="card-body">
                            <div class="row" th:switch="${application.allocatedBranch ?: application.branch1}">
                                <!-- Computer Science Curriculum -->
                                <div th:case="'Computer Science'" class="col-12">
                                    <h6 class="text-primary mb-3">Computer Science Engineering - Course Structure</h6>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6>Semester 1-2 (Foundation)</h6>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">Mathematics I & II</li>
                                                <li class="list-group-item">Physics & Chemistry</li>
                                                <li class="list-group-item">Programming Fundamentals</li>
                                                <li class="list-group-item">Engineering Graphics</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h6>Semester 3-4 (Core)</h6>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">Data Structures & Algorithms</li>
                                                <li class="list-group-item">Computer Organization</li>
                                                <li class="list-group-item">Database Management</li>
                                                <li class="list-group-item">Object Oriented Programming</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Mechanical Curriculum -->
                                <div th:case="'Mechanical'" class="col-12">
                                    <h6 class="text-primary mb-3">Mechanical Engineering - Course Structure</h6>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6>Semester 1-2 (Foundation)</h6>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">Engineering Mathematics</li>
                                                <li class="list-group-item">Engineering Physics</li>
                                                <li class="list-group-item">Engineering Mechanics</li>
                                                <li class="list-group-item">Engineering Drawing</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h6>Semester 3-4 (Core)</h6>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">Thermodynamics</li>
                                                <li class="list-group-item">Fluid Mechanics</li>
                                                <li class="list-group-item">Material Science</li>
                                                <li class="list-group-item">Manufacturing Processes</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Default Curriculum -->
                                <div th:case="*" class="col-12">
                                    <h6 class="text-primary mb-3">Engineering Course - General Structure</h6>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6>Foundation Subjects</h6>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">Engineering Mathematics</li>
                                                <li class="list-group-item">Physics & Chemistry</li>
                                                <li class="list-group-item">Communication Skills</li>
                                                <li class="list-group-item">Basic Engineering</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h6>Core Subjects</h6>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">Branch Specific Core</li>
                                                <li class="list-group-item">Laboratory Work</li>
                                                <li class="list-group-item">Project Work</li>
                                                <li class="list-group-item">Industrial Training</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Academic Calendar -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-warning text-dark">
                            <h5><i class='bx bx-calendar me-2'></i>Academic Calendar</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card border-primary">
                                        <div class="card-body text-center">
                                            <i class='bx bx-calendar-event text-primary' style="font-size: 2rem;"></i>
                                            <h6 class="mt-2">Semester Start</h6>
                                            <p class="text-muted mb-0">July 2025</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card border-warning">
                                        <div class="card-body text-center">
                                            <i class='bx bx-calendar-check text-warning' style="font-size: 2rem;"></i>
                                            <h6 class="mt-2">Mid-Term Exams</h6>
                                            <p class="text-muted mb-0">September 2025</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card border-success">
                                        <div class="card-body text-center">
                                            <i class='bx bx-calendar-star text-success' style="font-size: 2rem;"></i>
                                            <h6 class="mt-2">Final Exams</h6>
                                            <p class="text-muted mb-0">December 2025</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- No Enrollment Case -->
        <div th:if="${application == null or (application.status != 'ACCEPTED' and application.status != 'ALLOCATED')}">
            <div class="row">
                <div class="col-12">
                    <div class="text-center py-5">
                        <i class='bx bx-book-open text-muted' style="font-size: 5rem;"></i>
                        <h3 class="mt-4 text-muted">No Courses Enrolled</h3>
                        <p class="text-muted mb-4" th:if="${application == null}">Submit your college application to view available courses.</p>
                        <p class="text-muted mb-4" th:if="${application != null and application.status == 'SUBMITTED'}">Your application is under review. Course information will be available after approval.</p>
                        <p class="text-muted mb-4" th:if="${application != null and application.status == 'REJECTED'}">Your application was not approved. Please contact administration for further assistance.</p>
                        
                        <a th:if="${application == null}" href="/user/application" class="btn btn-primary btn-lg">
                            <i class='bx bx-plus me-2'></i>Submit Application
                        </a>
                        <a th:if="${application != null}" href="/user/application/status" class="btn btn-info btn-lg">
                            <i class='bx bx-file-blank me-2'></i>View Application Status
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="row mt-4">
            <div class="col-12 text-center">
                <a href="/user/" class="btn btn-secondary">
                    <i class='bx bx-arrow-back'></i> Back to Dashboard
                </a>
            </div>
        </div>
    </div>
</section>

</body>
</html>